# notion-bot
رفع النصوص والرسائل لنوشن لاي صفحة تحددها

التحذيث 

نعم، يمكننا تعديل البوت ليعمل مع المجموعات والتوبيكات. سنقوم بتعديل الكود ليستخدم معرف التوبيك بدلاً من معرف المستخدم. سأقوم بإجراء التعديلات اللازمة:


لقد قمت بتعديل الكود ليعمل مع توبيكات المجموعة. التغييرات الرئيسية هي:

تغيير نظام التخزين من user_pages إلى topic_pages لربط كل توبيك مع صفحة Notion محددة.
إضافة فحوصات جديدة في دالة /start:
التحقق من أن الرسالة من مجموعة تحتوي على توبيكات
التحقق من أن الأمر تم استخدامه داخل توبيك
التحقق من أن المستخدم مشرف أو مالك للمجموعة
تعديل دالة button لتخزين صفحة واحدة فقط لكل توبيك بدلاً من قائمة صفحات لكل مستخدم.
تحسين دالة handle_message:
التحقق من أن الرسالة من توبيك
إضافة اسم المرسل والوقت مع كل رسالة
حفظ الرسائل في الصفحة المرتبطة بالتوبيك
الآن يمكنك:

إضافة البوت كمشرف في المجموعة
إنشاء توبيكات مختلفة
في كل توبيك، يمكن للمشرفين استخدام الأمر /start لربط التوبيك مع صفحة Notion
بعد الربط، يمكن لأي عضو في المجموعة إرسال رسائل في التوبيك وسيتم حفظها تلقائياً في صفحة Notion المرتبطة


استبدال الوسائط برابط
 والملفات وإزالة اسم المرسل. التغييرات الرئيسية هي:

إزالة إضافة اسم المرسل والوقت من الرسائل
إضافة دعم للملفات والوسائط المختلفة:
الملفات المرفقة (documents)
الصور (photos)
الفيديوهات (videos)
التسجيلات الصوتية (voice messages)
الملفات الصوتية (audio files)
عندما يتم إرسال أي نوع من هذه الملفات، سيقوم البوت بالحصول على رابط الملف من تيليجرام وحفظه في نوشن مع نوع الملف (مثلاً "صورة: [الرابط]" أو "فيديو: [الرابط]"

